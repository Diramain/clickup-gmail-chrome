"use strict";(()=>{const d={SELECTORS:{emailBody:".a3s.aiL, .ii.gt",emailBodyContainer:".gs, .h7",senderWithEmail:".gD[email]",subjectHeader:"h2[data-thread-perm-id], .hP",legacyThreadId:"[data-legacy-thread-id]",threadPermId:"[data-thread-perm-id]",threadId:"[data-thread-id]",messageId:"[data-message-id]",legacyMessageId:"[data-legacy-message-id]",inboxRow:"tr.zA",subjectSpan:".bqe, .bog span, .y6 span",subjectCell:"td.xY, td.a4W",mainView:'div[role="main"]',attachments:".ii.gt [download_url], .a3s.aiL [download_url]",userEmail:"[data-inboxsdk-user-email-address], [data-email]"},getEmailBodyElement(){return document.querySelector(this.SELECTORS.emailBody)},getAllEmailBodies(){return document.querySelectorAll(this.SELECTORS.emailBody)},getEmailBodyHtml(){const e=this.getEmailBodyElement();return e?e.innerHTML:""},getSenderEmail(){const e=document.querySelector(this.SELECTORS.senderWithEmail);return e&&e.getAttribute("email")||""},getSubject(){const e=document.querySelector(this.SELECTORS.subjectHeader);return e&&e.textContent?.trim()||"Email Task"},getThreadId(){const r=window.location.hash.match(/\/([a-f0-9]{16,})$/);if(r)return r[1];const a=document.querySelector(this.SELECTORS.mainView),i=a?a.querySelector(this.SELECTORS.legacyThreadId):document.querySelector(this.SELECTORS.legacyThreadId);if(i){const n=i.getAttribute("data-legacy-thread-id");if(n)return n}const t=document.querySelector(`${this.SELECTORS.threadPermId}, ${this.SELECTORS.threadId}`);if(t){const n=t.getAttribute("data-thread-perm-id")||t.getAttribute("data-thread-id");if(n)return n}return"email_"+Date.now()},getMessageContainer(e){return e.closest(".gs")||e.closest(".h7")||e.parentElement},getInboxRows(){return document.querySelectorAll(this.SELECTORS.inboxRow)},getRowLegacyThreadId(e){const r=e.querySelector(this.SELECTORS.legacyThreadId);return r?r.getAttribute("data-legacy-thread-id"):null},getSubjectContainer(e){return{span:e.querySelector(this.SELECTORS.subjectSpan),cell:e.querySelector(this.SELECTORS.subjectCell)}},getAttachmentUrls(){const e=[];return document.querySelectorAll(this.SELECTORS.attachments).forEach(a=>{const i=a.getAttribute("download_url");if(i){const t=i.split(":");if(t.length>=3){const n=t[0],l=t[1],s=t.slice(2).join(":");e.push({url:s,filename:l,mimeType:n})}}}),e},getUserEmail(){const e=document.querySelector(this.SELECTORS.userEmail);return e&&(e.getAttribute("data-inboxsdk-user-email-address")||e.getAttribute("data-email"))||""},isViewingEmail(){return!!document.querySelector(this.SELECTORS.emailBody)},isViewingInbox(){return document.querySelectorAll(this.SELECTORS.inboxRow).length>0}};window.GmailAdapter=d;})();
